"use strict";(self.webpackChunkgoit_tweeter_01=self.webpackChunkgoit_tweeter_01||[]).push([[620],{620:function(e,r,t){t.r(r),t.d(r,{default:function(){return I}});var n=t(413),a=t(433),o=t(439),s=t(791),c=t(689),i=t(165),l=t(861);function u(){return(u=(0,l.Z)((0,i.Z)().mark((function e(r,t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://645a335e95624ceb21fab7f8.mockapi.io/users?p=".concat(r,"&l=").concat(t),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject(new Error("Sorry, bad request from the query."))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=(0,l.Z)((0,i.Z)().mark((function e(r,t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://6457a8a30c15cb14820dc3cc.mockapi.io/users/".concat(r),{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify({followers:t,isfollowing:n})}).then((function(e){return e.ok?e.json():Promise.reject(new Error("Sorry, bad request from the query."))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=t(87),m="Link_link__DLONq",h=t(184),_=function(e){var r=e.to,t=e.children;return(0,h.jsx)(f.rU,{to:r,className:m,children:t})},p="Cards_cards__YCpqn",w="Cards_cardsList__OexqN",g={card:"Card_card__-SwHU",cardLogo:"Card_cardLogo__URFZ0",cardDelimiter:"Card_cardDelimiter__dOprk",cardImgWrapper:"Card_cardImgWrapper__B3IEb",cardImg:"Card_cardImg__7mJVy",cardData:"Card_cardData__2fWiG",cardTxt:"Card_cardTxt__aBNkY",cardButton:"Card_cardButton__2fbMp",cardButtonFollowing:"Card_cardButtonFollowing__oSPF9"};var v=t.p+"static/media/goit-logo.e917114d7945c04c85a8946a331d28b6.svg";function x(e){var r=e.user,t=e.tweets,n=e.followers,a=e.isfollowing,o=e.avatar,s=e.onHandleClick;function c(e){return e<1e3?e:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}return(0,h.jsxs)("div",{className:g.card,children:[(0,h.jsx)("img",{src:v,alt:"GoIt Logo",className:g.cardLogo}),(0,h.jsx)("div",{className:g.cardImgWrapper,children:(0,h.jsx)("img",{src:o,alt:r,className:g.cardImg})}),(0,h.jsx)("div",{className:g.cardDelimiter}),(0,h.jsxs)("div",{className:g.cardData,children:[(0,h.jsxs)("p",{className:g.cardTxt,children:[c(t)," tweets"]}),(0,h.jsxs)("p",{className:g.cardTxt,children:[c(n)," followers"]}),a?(0,h.jsx)("button",{className:g.cardButtonFollowing,onClick:s,children:"following"}):(0,h.jsx)("button",{className:g.cardButton,onClick:s,children:"follow"})]})]})}function j(e){var r=e.tweets,t=e.updateTweet;return(0,h.jsx)("section",{className:p,children:(0,h.jsx)("ul",{className:w,children:r.map((function(e){var r=e.id,n=e.user,a=e.tweets,o=e.followers,s=e.isfollowing,c=e.avatar;return(0,h.jsx)("li",{children:(0,h.jsx)(x,{user:n,tweets:a,followers:o,isfollowing:s,avatar:c,onHandleClick:function(){return t(r)}})},r)}))})})}var N="CardContent_info__x1rMJ";function C(e){var r=e.message;return(0,h.jsx)("section",{className:N,children:(0,h.jsx)("p",{children:r})})}var k=t(116),b="Loader_loader__+lRPl";function Z(e){var r=e.waitingNote;return(0,h.jsxs)("div",{className:b,children:[(0,h.jsx)(k.s5,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"96",visible:!0}),(0,h.jsx)("p",{children:r})]})}var y="LoadMore_loadMore__8cqi9";function S(e){var r=e.onClick;return(0,h.jsx)("button",{onClick:r,className:y,children:"Load more"})}var T="Notification_notification__SfISU";function L(e){var r=e.message;return(0,h.jsx)("section",{className:T,children:(0,h.jsx)("p",{children:r})})}var B=t(305),I=function(){var e,r,t=null!==(e=null===(r=(0,c.TH)().state)||void 0===r?void 0:r.from)&&void 0!==e?e:"/",i=(0,s.useState)([]),l=(0,o.Z)(i,2),f=l[0],m=l[1],p=(0,s.useState)(1),w=(0,o.Z)(p,2),g=w[0],v=w[1],x=(0,s.useState)(!0),N=(0,o.Z)(x,2),k=N[0],b=N[1],y=(0,s.useState)(!1),T=(0,o.Z)(y,2),I=T[0],q=T[1],D=(0,s.useState)(null),F=(0,o.Z)(D,2),E=F[0],P=F[1],U=(0,s.useState)(""),W=(0,o.Z)(U,2),H=W[0],M=W[1],O=(0,s.useRef)(!1);(0,s.useEffect)((function(){return b(!0),q(!1),O.current,setTimeout((function(){(function(e,r){return u.apply(this,arguments)})(g,3).then((function(e){m((function(r){return[].concat((0,a.Z)(r),(0,a.Z)(e))}))})).catch((function(e){P(e),q(!0),console.log(e.message)})).finally(b(!1))}),370),function(){O.current=!0}}),[g]);var G=function(e,r){switch(e){case"all":default:return r;case"follow":return r.filter((function(e){return!e.isfollowing}));case"following":return r.filter((function(e){return e.isfollowing}))}}(H,f);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("section",{className:"Service",children:[(0,h.jsx)(_,{to:t,children:"Back"}),(0,h.jsx)(B.ZP,{options:[{label:"all",value:"all"},{label:"follow",value:"follow"},{label:"following",value:"following"}],className:"Filter",onChange:function(e){return r=e.value,void M(r);var r}})]}),(0,h.jsxs)("div",{className:"TweeterContainer",children:[(0,h.jsx)("h1",{className:"App__title",children:"Tweets"}),(0,h.jsx)(j,{tweets:G,updateTweet:function(e){var r=f.find((function(r){return r.id===e})),t=r.followers,a=r.isfollowing,o=a?t-1:t+1,s=!a;(function(e,r,t){return d.apply(this,arguments)})(e,o,s).then((function(r){m((function(r){return r.map((function(r){return r.id===e?(0,n.Z)((0,n.Z)({},r),{},{followers:o,isfollowing:s}):r}))}))})).catch((function(e){console.log(e.message)}))}}),k?(0,h.jsx)(Z,{waitingNote:"Loading  more tweets..."}):I?(0,h.jsx)(L,{message:E.message}):g>3?(0,h.jsx)(C,{message:"End of tweet list"}):(0,h.jsx)(S,{onClick:function(){v(g+1)}})]})]})}}}]);
//# sourceMappingURL=620.685177f6.chunk.js.map